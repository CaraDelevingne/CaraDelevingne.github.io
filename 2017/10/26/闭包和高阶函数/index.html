<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Cara,zzxxcclloopp@gmail.com"><title>é—­åŒ…å’Œé«˜é˜¶å‡½æ•° Â· Cara's Blog</title><meta name="description" content="è¿™ä¸€ç¯‡ç¬”è®°æ˜¯ä¸ºæ­£å¼å¼€å§‹å­¦ä¹  javadcript è®¾è®¡æ¨¡å¼åšé“ºå«ï¼Œç”±äºè®¸å¤šè®¾è®¡æ¨¡å¼éƒ½ç”¨åˆ°äº†é—­åŒ…å’Œé«˜é˜¶å‡½æ•°æ¥å®ç°, æ‰€ä»¥äº†è§£è¿™ä¸¤ä¸ªçŸ¥è¯†ç‚¹ä¹Ÿæ˜¯å¿…è¦çš„.

é—­åŒ…é—­åŒ…ç®€å•çš„æ¥è¯´æ˜¯å‡½æ•°ä¸å‡½æ•°ä¹‹é—´çš„æ¡¥æ¢, è®©ä¸€ä¸ªå‡½æ•°æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸé‡Œçš„å˜é‡. å®šä¹‰è¯´èµ·æ¥è¿˜æ˜¯å¾ˆç”Ÿæ¶©çš„, è¦ç†è§£é—­åŒ…æˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“å˜é‡çš„ä½œç”¨"><meta name="keywords" content="hexo, HTML, CSS, Javascript, Node.js"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="http://ordjgqxuv.bkt.clouddn.com/nike-girl/IMG_2930.JPG" style="width:127px;"><h3 title=""><a href="/">Cara's Blog</a></h3><div class="description"><p>å’¸é±¼çš„åšå®¢å’Œå­¦ä¹ ç¬”è®°ğŸ“’ 'Lok-Tar Ogar!'.</p></div></div></div><ul class="social-links"><li><a href="http://github.com/Caraws"><i class="fa fa-github"></i></a></li></ul><div class="footer"></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">é¦–é¡µ</a></li><li><a href="/archives">å½’æ¡£</a></li><li><a href="/about">å…³äº</a></li><li><a href="/links">å‹é“¾</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img src="http://ordjgqxuv.bkt.clouddn.com/cara_30/WechatIMG8.jpeg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>é—­åŒ…å’Œé«˜é˜¶å‡½æ•°</a></h3></div><div class="post-content"><p>è¿™ä¸€ç¯‡ç¬”è®°æ˜¯ä¸ºæ­£å¼å¼€å§‹å­¦ä¹  javadcript è®¾è®¡æ¨¡å¼åšé“ºå«ï¼Œç”±äºè®¸å¤šè®¾è®¡æ¨¡å¼éƒ½ç”¨åˆ°äº†é—­åŒ…å’Œé«˜é˜¶å‡½æ•°æ¥å®ç°, æ‰€ä»¥äº†è§£è¿™ä¸¤ä¸ªçŸ¥è¯†ç‚¹ä¹Ÿæ˜¯å¿…è¦çš„.</p>
<blockquote>
<h3 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h3><p>é—­åŒ…ç®€å•çš„æ¥è¯´æ˜¯å‡½æ•°ä¸å‡½æ•°ä¹‹é—´çš„æ¡¥æ¢, è®©ä¸€ä¸ªå‡½æ•°æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸé‡Œçš„å˜é‡. å®šä¹‰è¯´èµ·æ¥è¿˜æ˜¯å¾ˆç”Ÿæ¶©çš„, è¦ç†è§£é—­åŒ…æˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“å˜é‡çš„ä½œç”¨åŸŸä»¥åŠå˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ‰è¡Œ.</p>
</blockquote>
<ul>
<li>å˜é‡çš„ä½œç”¨åŸŸ<br>å˜é‡çš„ä½œç”¨åŸŸæŒ‡çš„æ˜¯å˜é‡çš„æœ‰æ•ˆèŒƒå›´. åœ¨å‡½æ•°ä¸­ç”Ÿå‘½å˜é‡æ—¶, å¦‚æœæ²¡æœ‰å…³é”®å­— varã€letåŠconsté‚£ä¹ˆè¿™ä¸ªå˜é‡å°±ä¼šå˜æˆå…¨å±€å˜é‡; å¦‚æœæœ‰è¿™ä¸ªæ—¶å€™çš„å˜é‡å°±æ˜¯å±€éƒ¨å˜é‡, åªæœ‰åœ¨å‡½æ•°å†…éƒ¨æ‰èƒ½å¤Ÿè®¿é—®åˆ°.<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> fun = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">let</span> a = <span class="number">1</span>;</div><div class="line">	alert(a)</div><div class="line">&#125;</div><div class="line">fun()</div><div class="line">alert(a) <span class="comment">// a is not defined</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>å‡½æ•°è¿™ä¸ªæ—¶å€™å°±åƒä¸€å—å•é¢é•œ, é‡Œé¢å¯ä»¥çœ‹è§å¤–é¢, å¤–é¢ä¸èƒ½çœ‹åˆ°é‡Œé¢. å› ä¸ºå‡½æ•°åœ¨æœç´¢ä¸€ä¸ªå˜é‡çš„æ—¶å€™, å¦‚æœå‡½æ•°å†…æ²¡æœ‰è¿™ä¸ªå˜é‡, é‚£ä¹ˆè¿™ä¸ªæœç´¢è¿‡ç¨‹ä¼šéšç€ä»£ç çš„æ‰§è¡Œç¯å¢ƒåˆ›å»ºçš„ä½œç”¨åŸŸé“¾å‘å¤–æœç´¢ç›´è‡³å…¨å±€å¯¹è±¡.</p>
<ul>
<li>å˜é‡ç”Ÿå‘½å‘¨æœŸ<br>å¯¹äºå…¨å±€å˜é‡æ¥è¯´, å®ƒçš„ç”Ÿå‘½å‘¨æœŸè‡ªç„¶æ˜¯æ°¸ä¹…çš„é™¤éæˆ‘ä»¬æ‰‹åŠ¨é”€æ¯è¿™ä¸ªå˜é‡; å¯¹äºå±€éƒ¨å˜é‡, ä¸€èˆ¬æ¥è¯´å½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åè¯¥å˜é‡å°±ä¼šè·Ÿç€è¢«é”€æ¯. è€Œé—­åŒ…åˆ™å¯ä»¥å»¶ç»­å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸ, ä¸¾ä¸ªæ —å­:<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> func = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">let</span> a = <span class="number">0</span>;</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		a++;</div><div class="line">		alert(a);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> fn = func();</div><div class="line">fn(); <span class="comment">// 1</span></div><div class="line">fn(); <span class="comment">// 2</span></div><div class="line">fn(); <span class="comment">// 3</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° a å˜é‡ä¸ä»…åœ¨å¤–éƒ¨å¯ä»¥è¢«è®¿é—®åˆ°è€Œä¸”è¿˜ä¸€ç›´åœ¨é€’å¢, è¿™æ˜¯å› ä¸º <code>fn = func()</code>æ‰§è¡Œæ—¶, fn ä¿å­˜äº† func è¿”å›çš„åŒ¿åå‡½æ•°, è€Œè¿™ä¸ªåŒ¿åå‡½æ•°æ˜¯æœ‰æƒ func() è¢«è°ƒç”¨æ—¶äº§ç”Ÿçš„ç¯å¢ƒ. a å˜é‡å°±åœ¨è¿™ä¸ªç¯å¢ƒä¸­, æ‰€ä»¥æ—¢ç„¶å±€éƒ¨å˜é‡æ‰€åœ¨æ¢çš„ç¯å¢ƒæ²¡æœ‰è¢«é”€æ¯é‚£ä¹ˆ a å˜é‡ä¹Ÿä¸ä¼šè¢«é”€æ¯æ‰, è¿™ä¸ªä¾‹å­å°±äº§ç”Ÿäº†ä¸€ä¸ªé—­åŒ…ç»“æ„.</p>
<blockquote>
<h4 id="é—­åŒ…çš„ä½œç”¨"><a href="#é—­åŒ…çš„ä½œç”¨" class="headerlink" title="é—­åŒ…çš„ä½œç”¨"></a>é—­åŒ…çš„ä½œç”¨</h4></blockquote>
<ul>
<li>å°è£…å˜é‡<br>ä¼—æ‰€å‘¨çŸ¥å…¨å±€å˜é‡æ˜¯éå¸¸å®¹æ˜“å¼•èµ·å‘½åå†²çªçš„, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨é—­åŒ…æŠŠä¸€äº›ä¸éœ€è¦æš´éœ²åœ¨å…¨å±€çš„å˜é‡å°è£…æˆç§æœ‰å˜é‡.</li>
</ul>
<p>å‡è®¾æœ‰ä¸€ä¸ªè®¡ç®—ä¹˜ç§¯çš„å‡½æ•°:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mult = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">// ç¼“å­˜(å°è£…èµ·æ¥)</span></div><div class="line">	<span class="keyword">let</span> cache = &#123;&#125;</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">let</span> arg = [].join.call(<span class="built_in">arguments</span>, <span class="string">','</span>)</div><div class="line">		<span class="comment">// å°è£…è®¡ç®—æ–¹æ³•</span></div><div class="line">		<span class="keyword">let</span> calulate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">			<span class="keyword">let</span> a = <span class="number">1</span>;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = <span class="built_in">arguments</span>.length; i &lt; len; i++) &#123;</div><div class="line">				a = a * <span class="built_in">arguments</span>[i]</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">			<span class="comment">// å­˜åœ¨ç¼“å­˜åˆ™ä¸è®¡ç®—</span></div><div class="line">			<span class="keyword">if</span> (arg <span class="keyword">in</span> cache) <span class="keyword">return</span> cache[arg]</div><div class="line">			<span class="keyword">return</span> cache[arg] = calulate.apply(<span class="literal">null</span>, <span class="built_in">arguments</span>)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;)()</div></pre></td></tr></table></figure></p>
<p>å°†å˜é‡ cache å°è£…åœ¨ mult å‡½æ•°ä¸­æ¥ç¼“å­˜å·²ç»è®¡ç®—è¿‡çš„å‚æ•°, ä»¥å‡å°‘é‡å¤è®¡ç®—. è¿™ä¸ªç¼“å­˜æœºåˆ¶æœ¬æ¥æ˜¯å¯ä»¥æ‰”åœ¨å…¨å±€ç¯å¢ƒä¸­çš„.</p>
<ul>
<li>å»¶ç»­å±€éƒ¨å˜é‡ç”Ÿå‘½å‘¨æœŸ<br>å¹³å¸¸åšåŸ‹ç‚¹ä¼šç”¨åˆ°çš„ image å¯¹è±¡æ¥ä¸ŠæŠ¥æ•°æ®, å¦‚ä¸‹:</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> report = <span class="function"><span class="keyword">function</span> (<span class="params">src</span>) </span>&#123;</div><div class="line">	<span class="keyword">let</span> img = <span class="keyword">new</span> Image()</div><div class="line">	img.src = src</div><div class="line">&#125;</div><div class="line">report(<span class="string">'http://xxxxx.com/xxx'</span>)</div></pre></td></tr></table></figure>
<p>è¿™ç§å†™æ³•ä¼šé€ æˆæ•°æ®ä¸¢å¤±, å› ä¸ºåœ¨ HTTP è¿˜æœªç»“æŸæ—¶, report å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•è€Œ img ä¸º report å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡, åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åå°±ä¼šéšä¹‹é”€æ¯é€ æˆæ•°æ®ä¸¢å¤±çš„æƒ…å†µ. ä¸‹é¢ç”¨é—­åŒ…æŠŠå˜é‡å°è£…èµ·æ¥, æ¥è§£å†³è¿™ä¸€é—®é¢˜:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> report = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">let</span> imgs = []</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">src</span>) </span>&#123;</div><div class="line">		<span class="keyword">let</span> img = <span class="keyword">new</span> Image();</div><div class="line">		imgs.push(img);</div><div class="line">		img.src = src</div><div class="line">	&#125;</div><div class="line">&#125;)()</div><div class="line">report(<span class="string">'http://xxxxx.com/xxx'</span>)</div></pre></td></tr></table></figure></p>
<blockquote>
<h4 id="é—­åŒ…å®ç°å‘½ä»¤æ¨¡å¼"><a href="#é—­åŒ…å®ç°å‘½ä»¤æ¨¡å¼" class="headerlink" title="é—­åŒ…å®ç°å‘½ä»¤æ¨¡å¼"></a>é—­åŒ…å®ç°å‘½ä»¤æ¨¡å¼</h4><p>è¯´äº†è¿™ä¹ˆå¤šå°±æ¥çœ‹çœ‹å…³äºé—­åŒ…çš„è¿ç”¨å§, è¿™é‡Œç”¨é—­åŒ…ç®€å•å®ç°ä¸‹å‘½ä»¤æ¨¡å¼, é¡ºä¾¿é¢„å…ˆäº†è§£ä¸€ä¸‹å‘½ä»¤æ¨¡å¼.</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">'open'</span> <span class="attr">onclick</span>=<span class="string">'execute'</span>&gt;</span>æ‰§è¡Œå‘½ä»¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">'close'</span> <span class="attr">onclick</span>=<span class="string">'undo'</span>&gt;</span>æ’¤é”€å‘½ä»¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>é¢å‘å¯¹è±¡ç‰ˆ<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> TV = &#123;</div><div class="line">	open () &#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">'TV is open!'</span>)</div><div class="line">	&#125;,</div><div class="line">	close () &#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">'TV is close!'</span>)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// æ¥æ”¶å‘½ä»¤</span></div><div class="line"><span class="keyword">const</span> ReceiveCommand = <span class="function"><span class="params">receiver</span> =&gt;</span> &#123;</div><div class="line">	<span class="keyword">this</span>.receiver = receiver</div><div class="line">&#125;</div><div class="line"><span class="comment">// æ‰“å¼€ç”µè§†</span></div><div class="line">ReceiveCommand.prototype.execute = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.receiver.open()</div><div class="line">&#125;</div><div class="line"><span class="comment">// å…³ç”µè§†</span></div><div class="line">ReceiveCommand.prototype.undo = functon () &#123;</div><div class="line">	<span class="keyword">this</span>.receiver.close()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// è®¾ç½®å‘½ä»¤</span></div><div class="line"><span class="keyword">const</span> setCommand = <span class="function"><span class="keyword">function</span> (<span class="params">command</span>) </span>&#123;</div><div class="line">	<span class="built_in">document</span>.getElementById(<span class="string">'open'</span>).onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		command.execute()</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">document</span>.getElementById(<span class="string">'close'</span>).onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		command.undo()</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// å°†å‘½ä»¤å‘Šè¯‰æ‰§è¡Œè€…, è®¾ç½®å‘½ä»¤ä¼ å…¥æ‰§è¡Œè€…</span></div><div class="line">setCommand(<span class="keyword">new</span> ReceiveCommand(TV))</div></pre></td></tr></table></figure>
</li>
</ul>
<p>å‘½ä»¤æ¨¡å¼æ˜¯æŠŠè¯·æ±‚å‘èµ·è€…å’Œæ‰§è¡Œå‘½ä»¤(æ‰§è¡Œè€…)åˆ†ç¦»å¼€æ¥, ä»¥è¾¾åˆ°è§£è€¦çš„ç›®çš„. åœ¨æ‰§è¡Œå‘½ä»¤ä¹‹å‰, æŠŠå‘½ä»¤æ”¾å…¥æ‰§è¡Œè€…æ¥å‘Šè¯‰æ‰§è¡Œè€…è¦æ‰§è¡Œä»€ä¹ˆæ ·çš„å‘½ä»¤, å‘½ä»¤æ¨¡å¼å¤§æ¦‚å°±æ˜¯è¿™æ ·å•¦.</p>
<ul>
<li>é—­åŒ…ç‰ˆ<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> TV = &#123;</div><div class="line">	open () &#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">'TV is open!'</span>)</div><div class="line">	&#125;,</div><div class="line">	close () &#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">'TV is close!'</span>)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// æ‰§è¡Œè€…</span></div><div class="line"><span class="keyword">const</span> receiveCommand = <span class="function"><span class="params">receiver</span> =&gt;</span> &#123;</div><div class="line">	<span class="keyword">let</span> execute = <span class="function"><span class="params">_</span> =&gt;</span> &#123;</div><div class="line">		<span class="keyword">return</span> receiver.open()</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">let</span> undo = <span class="function"><span class="params">_</span> =&gt;</span> &#123;</div><div class="line">		<span class="keyword">return</span> receiver.close()</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> &#123;</div><div class="line">		execute: execute,</div><div class="line">		undo: undo</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// å‘èµ·è€…</span></div><div class="line"><span class="keyword">const</span> setCommand = <span class="function"><span class="params">command</span> =&gt;</span> &#123;</div><div class="line">	<span class="built_in">document</span>.getElementById(<span class="string">'open'</span>).onclick = <span class="function"><span class="params">_</span> =&gt;</span> &#123;</div><div class="line">		execute.open()</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">document</span>.getElementById(<span class="string">'close'</span>).onclick = <span class="function"><span class="params">_</span> =&gt;</span> &#123;</div><div class="line">		undo.close()</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">setCommand(receiveCommand(TV))</div></pre></td></tr></table></figure>
</li>
</ul>
<p>é—­åŒ…æ˜æ˜¾æ¸…æ™°æ›´å¤š, ä¹Ÿæ›´ç®€æ´.</p>
<blockquote>
<h3 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="headerlink" title="é«˜é˜¶å‡½æ•°"></a>é«˜é˜¶å‡½æ•°</h3><p>å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’æˆ–è®©å‡½æ•°æ‰§è¡Œç»“æœè¿”å›å¦ä¸€ä¸ªå‡½æ•°, æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€çš„å‡½æ•°éƒ½å¯ä»¥ç§°ä½œä¸ºé«˜é˜¶å‡½æ•°.</p>
</blockquote>
<h4 id="å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’"><a href="#å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’" class="headerlink" title="å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’"></a>å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’</h4><p>å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’, å°±æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å°†ä¸ä¸šåŠ¡ç›¸å…³çš„é€»è¾‘ä»£ç åˆ†ç¦»å‡ºæ¥, è§£é™¤ä¸šåŠ¡ä»£ç å’Œä¸å˜é€»è¾‘çš„è€¦åˆ, æœ€å¸¸è§çš„å°±æ˜¯æˆ‘ä»¬çš„å›è°ƒå‡½æ•°. å®é™…è¿ç”¨ä¸­ ajax å¼‚æ­¥è¯·æ±‚, å½“æˆ‘ä»¬ä¸çŸ¥é“è¿”å›å€¼åœ¨ä»€ä¹ˆæ—¶å€™è¿”å›å€¼åˆéœ€è¦åœ¨è¿”å›ååšä¸€äº›å¤„ç†, å°±è¦ç”¨åˆ°å›è°ƒå‡½æ•°äº†.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> getPersonInfo = <span class="function"><span class="keyword">function</span> (<span class="params">userId, callback</span>) </span>&#123;</div><div class="line">	$.ajax(<span class="string">`http://xxx/getPersonInfo?<span class="subst">$&#123;userId&#125;</span>`</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">		callback &amp;&amp; callback(data)</div><div class="line">	&#125;)</div><div class="line">&#125;</div><div class="line"><span class="comment">// è¿™é‡Œçš„åŒ¿åå‡½æ•°å°±æ˜¯ä¸Šé¢çš„ callback</span></div><div class="line">getPersonInfo(<span class="number">54332123</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(data)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>è¿™ç§æ˜¯æˆ‘ä»¬æ¯”è¾ƒå¸¸è§çš„å›è°ƒå‡½æ•°, åœ¨å…¶ä»–çš„æ–¹é¢, ä¹Ÿå¯ä»¥å°†ä¸€äº›è¯·æ±‚å§”æ‰˜ç»™å¦ä¸€ä¸ªå‡½æ•°ä»£ä¸ºæ‰§è¡Œ, å¦‚:<br>å‡å¦‚æˆ‘ä»¬éœ€è¦å…ˆåˆ›å»º100çš„ div èŠ‚ç‚¹, ç„¶åæŠŠå®ƒä»¬éšè—æ‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// count é»˜è®¤å€¼ä¸º100</span></div><div class="line"><span class="keyword">const</span> appendDiv = count = <span class="number">100</span>, callback =&gt; &#123;</div><div class="line">	<span class="keyword">if</span> (count &amp;&amp; <span class="keyword">typeof</span> count === <span class="string">'number'</span>) &#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; count; i++)&#123;</div><div class="line">			<span class="keyword">let</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>)</div><div class="line">			div.innerHTML = i</div><div class="line">			<span class="built_in">document</span>.body.appendChild(div)</div><div class="line">			<span class="comment">// å°†ä¸šåŠ¡ä»£ç å§”æ‰˜æ‰§è¡Œ</span></div><div class="line">			callback &amp;&amp; callback(div)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125; </div><div class="line"><span class="comment">// æŠŠæ”¹å˜æ ·å¼çš„ä¸šåŠ¡é€»è¾‘åˆ†ç¦»å‡ºæ¥</span></div><div class="line">appendDiv(<span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</div><div class="line">	el.style.cssText = <span class="string">`display: none`</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬å°±å°†ä¸šåŠ¡é€»è¾‘åˆ†ç¦»å‡ºæ¥äº†, ä»¥åå¯èƒ½æˆ‘ä»¬æƒ³æ”¹é¢œè‰²å•¦æˆ–è€…ä½ç½®ä»€ä¹ˆçš„ä¹Ÿæ–¹ä¾¿ç»´æŠ¤.</p>
<h4 id="å‡½æ•°ä½œä¸ºè¿”å›å€¼"><a href="#å‡½æ•°ä½œä¸ºè¿”å›å€¼" class="headerlink" title="å‡½æ•°ä½œä¸ºè¿”å›å€¼"></a>å‡½æ•°ä½œä¸ºè¿”å›å€¼</h4><p>ç›¸æ¯”æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’, å¯èƒ½å‡½æ•°å½“åšè¿”å›å€¼è¿”å›è¿ç”¨åœºæ™¯æ›´å¤šä¸€äº›, è®©å‡½æ•°è¿”å›å¦ä¸€ä¸ªå¯æ‰§è¡Œå‡½æ•°å°±æ„å‘³ç€è¿ç®—è¿‡ç¨‹å¯å»¶ç»­.ç›´æ¥æ¥çœ‹ä¸€äº›ä¾‹å­å§.</p>
<ul>
<li>æ£€æŸ¥ç±»å‹</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Type = &#123;&#125;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, type; type = [<span class="string">'Array'</span>, <span class="string">'String'</span>, <span class="string">'Number'</span>][i++];) &#123;</div><div class="line">	Type[<span class="string">'is'</span> + type] = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) === <span class="string">'[object '</span>+ type +<span class="string">']'</span></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(Type.isArray([])) <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(Type.isString(<span class="string">'123'</span>)) <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(Type.isNumber(<span class="number">123</span>)) <span class="comment">// true</span></div></pre></td></tr></table></figure>
<ul>
<li>å•ä¾‹æ¨¡å¼<br>  è¿™é‡Œå…ˆä¸è®¨è®ºå•ä¾‹æ¨¡å¼, åªçœ‹ä»£ç å®ç°</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// fn å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’</span></div><div class="line"><span class="keyword">const</span> getSingle = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</div><div class="line">	<span class="keyword">let</span> ret;</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="comment">// å¦‚æœ ret ä¸å­˜åœ¨, ret ç­‰äº fn å‡½æ•°</span></div><div class="line">		<span class="keyword">return</span> ret || (ret = fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>))</div><div class="line">	&#125;</div><div class="line">&#125; </div><div class="line"><span class="comment">// è°ƒç”¨è¿™ä¸ªé«˜é˜¶å‡½æ•°</span></div><div class="line"><span class="keyword">let</span> getDiv = getSingle(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="comment">// å‚æ•°ä¹Ÿä¼šä¸€èµ·ä¼ è¿‡æ¥, è¿™é‡Œè¿”å›['123']</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div><div class="line">	<span class="keyword">return</span> <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</div><div class="line">	</div><div class="line">&#125;)</div><div class="line">getDiv(<span class="string">'123'</span>)</div></pre></td></tr></table></figure>
<p>getSingle è¿™ä¸ªé«˜é˜¶å‡½æ•°æ—¢å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’, åˆè®©å‡½æ•°æ‰§è¡Œåè¿”å›å¦ä¸€ä¸ªå‡½æ•°.</p>
<blockquote>
<p>JavaScript è®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µè¿˜æœ‰ä¸ªä¾‹å­ä¹Ÿå¾ˆæœ‰æ„æ€<br>å«åš AOP(é¢å‘åˆ‡é¢ç¼–ç¨‹), ä½œç”¨æ˜¯æŠŠä¸ä¸šåŠ¡é€»è¾‘ä¸ç›¸å…³çš„éƒ¨åˆ†æŠ½ç¦»å‡ºæ¥å†é€šè¿‡åŠ¨æ€æ¤å…¥çš„æ–¹å¼åŠ å…¥ä¸šåŠ¡é€»è¾‘çš„æ¨¡å—ä¸­.</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// åœ¨åŸå‡½æ•°ä¹‹å‰</span></div><div class="line"><span class="built_in">Function</span>.prototype.before = <span class="function"><span class="keyword">function</span> (<span class="params">beforeFn</span>) </span>&#123;</div><div class="line">	<span class="keyword">let</span> that = <span class="keyword">this</span>; <span class="comment">// ä¿å­˜åŸå‡½æ•°çš„å¼•ç”¨</span></div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// A</span></div><div class="line">		<span class="comment">// æ‰§è¡Œæ–°å‡½æ•°å¹¶ä¿®æ­£ this</span></div><div class="line">		beforeFn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</div><div class="line">		<span class="comment">// æ‰§è¡ŒåŸå‡½æ•°</span></div><div class="line">		<span class="keyword">return</span> that.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// åœ¨åŸå‡½æ•°ä¹‹å</span></div><div class="line"><span class="built_in">Function</span>.prototype.after = <span class="function"><span class="keyword">function</span> (<span class="params">afterFn</span>) </span>&#123;</div><div class="line">	<span class="keyword">let</span> that = <span class="keyword">this</span></div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// B</span></div><div class="line">		<span class="comment">// å…ˆæ‰§è¡Œ before å‡½æ•°</span></div><div class="line">		that.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</div><div class="line">		<span class="comment">// å†æ‰§è¡Œæ–°å‡½æ•°</span></div><div class="line">		<span class="keyword">return</span> afterFn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="number">2</span>)</div><div class="line">&#125;</div><div class="line">fn = fn.before(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="number">1</span>)</div><div class="line">&#125;).after(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="number">3</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">fn() <span class="comment">// æŒ‰é¡ºåºè¾“å‡º 1 2 3</span></div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„:</p>
<ol>
<li>Afterä¸­çš„å›è°ƒå‡½æ•° B<br>å› ä¸ºåœ¨æœ€åæ‰§è¡Œ fn å‡½æ•°æ—¶, fn å·²ç»æ˜¯ after å‡½æ•°äº†, å› æ­¤åœ¨ fn() æ‰§è¡Œæ—¶è°ƒç”¨çš„æ˜¯ after ä¸­è¿”å›çš„åŒ¿åå‡½æ•°B.</li>
<li>B ä¸­çš„ that.apply(this, arguments)<br>æ­¤æ—¶çš„ that æŒ‡å‘ before å‡½æ•°</li>
<li>æ‰§è¡ŒBeforeä¸­çš„å›è°ƒå‡½æ•° A</li>
<li>A ä¸­çš„ beforeFn.apply(this, arguments)<br>æ‰§è¡Œ console.log(1)</li>
<li>return that.apply(this, arguments)<br>æ‰§è¡Œ console.log(2)</li>
<li>å›åˆ° after å‡½æ•°ä¸­æ‰§è¡Œreturn afterFn.apply(this, arguments)<br>æ‰§è¡Œ console.log(3)</li>
</ol>
<h4 id="å‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#å‡½æ•°æŸ¯é‡ŒåŒ–" class="headerlink" title="å‡½æ•°æŸ¯é‡ŒåŒ–"></a>å‡½æ•°æŸ¯é‡ŒåŒ–</h4><p>å‡½æ•°æŸ¯é‡ŒåŒ–å¯ä»¥è¯´æ˜¯é«˜é˜¶å‡½æ•°ç»å…¸ä¸­çš„ç»å…¸äº†, è¯´åˆ°é«˜é˜¶å‡½æ•°åº”è¯¥å¾ˆå¿«å°±ä¼šæƒ³åˆ°ä»–äº†</p>
<p>æœªå®Œå¾…ç»­â€¦<br>Created on 2017-10-26 by Cara</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-10-26</span><i class="fa fa-tag"></i><a href="/categories/ç¬”è®°ğŸ“’/" title="ç¬”è®°ğŸ“’" class="tag">ç¬”è®°ğŸ“’ </a><a href="/categories/ç¬”è®°ğŸ“’/JavaScriptè®¾è®¡æ¨¡å¼/" title="JavaScriptè®¾è®¡æ¨¡å¼" class="tag">JavaScriptè®¾è®¡æ¨¡å¼ </a><a href="/tags/Javascript/" title="Javascript" class="tag">Javascript </a></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,https://yoursite.com/2017/10/26/é—­åŒ…å’Œé«˜é˜¶å‡½æ•°/,Cara's Blog,é—­åŒ…å’Œé«˜é˜¶å‡½æ•°,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a role="navigation" href="/2017/10/22/base64-è½¬-blob/" title="base64 è½¬ blob" class="btn">ä¸‹ä¸€ç¯‡</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>